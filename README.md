# Bash-Homework
## Написать скрипт для крона, который раз в час присылает на заданную почту

- X IP адресов (с наибольшим кол-вом запросов) с указанием кол-ва запросов c момента последнего запуска скрипта
- Y запрашиваемых адресов (с наибольшим кол-вом запросов) с указанием кол-ва запросов c момента последнего запуска скрипта
- Все ошибки c момента последнего запуска
- Список всех кодов возврата с указанием их кол-ва с момента последнего запуска в письме должно быть прописан обрабатываемый временной диапазон, должна быть реализована защита от  мультизапуска.

## В ходе выполнения ДЗ был написан скрипт parser.sh, состоящий из двух функций: prepare и parser. 
Использованы следующие переменные: 
- $logfile - лог-файл из задания, путь к файлу:/vagrant/access.log; 
- $result - результат работы последнего запуска скрипта, путь к файлу:/var/log/parser/parser.log; 
- $runtimelog - файл для хранения даты из последней обработанной строки аксес-лога, путь до файла:/var/log/parser/runtime.log; 
- $templogfile - временный файл, в который копируется необработанная часть аксес-лога, путь к файлу/var/log/parser/tempaccess.log; 
- $lockfile - временный файл, предотвращающий повторный запуск скрипта, путь к файлу:/tmp/parserlockfile; 
- $emailaddress - адрес, на который будет отправено письмо с отчетом - "sterlev_alex@mail.ru"; 
- $ipcount - количество IP адресов с наибольшим количеством запросов, с которых клиенты обращались к серверу -10 - выбрано значение 10; 
- $urlcount - количество страниц с наибольшим количеством запросов, которые запрашивали клиенты -10 - выбрано значение 10.

## Защита от мультизапуска
- Реализована созданием файла блокировки по пути /tmp/parserlockfile. После выполнения скрипта или получении сигнала SIGINT или SIGTERM для его завершения файл блокировки удаляется, и скрипт может быть запущен снова.
